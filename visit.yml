name: Auto Generate AI Summaries

on:
  schedule:
    # Runs on a custom schedule based on Israel time (UTC+3)
    # Every hour from 8am-5pm, plus 8pm and midnight Israel time.
    - cron: '0 5-14,17,21 * * *'
  workflow_dispatch:  # Allows you to run this workflow manually

jobs:
  trigger-ai-function:
    runs-on: ubuntu-latest
    
    steps:
      - name: Trigger AI Summary Generation
        run: |
          echo "ðŸ¤– Triggering AI summary generation..."
          
          response=$(curl -s -X POST \
            -H "Content-Type: application/json" \
            -H "X-API-Key: ${{ secrets.AUTO_AI_SECRET_KEY }}" \
            https://hanahotplus-jlm.base44.app/functions/autoGenerateAISummariesMake)
          
          echo "ðŸ“Š Response:"
          echo "$response"
          
      - name: Complete
        run: |
          echo "âœ… Function execution completed"
